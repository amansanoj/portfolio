---
import type { CollectionEntry } from 'astro:content';
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';

type Props = CollectionEntry<'projects'>['data'];

const { title, description, period, tags, heroImage, live, github } = Astro.props;
---

<html lang="en">
	<head>
		<BaseHead title={`${title} â€” Aman Sanoj`} description={description} image={heroImage} type="article" author="Aman Sanoj" />
		<style>
			/* :global() selectors can't be expressed as markup Tailwind classes */
			.prose :global(h2) {
				font-size: 1.15em;
				text-transform: uppercase;
				letter-spacing: 0.06em;
				color: var(--c-text-muted);
				padding-top: 2em;
				border-top: 1px solid var(--c-border);
			}
			.prose :global(h2:first-child) { margin-top: 1.5em; padding-top: 1.5em; }
			.prose :global(ul) {
				padding-left: 1.25em;
				margin: 0 0 1em;
				display: flex;
				flex-direction: column;
				gap: 0.5em;
			}
			@media (max-width: 600px) {
				.post-title h1 { font-size: 2em; }
			}
			@media (max-width: 400px) {
				.post-title h1 { font-size: 1.7em; }
			}
		</style>
	</head>
	<body>
		<Header />
		<main id="main-content" tabindex="-1" class="w-full max-w-full box-border m-0">
			<article>
				<div class="back-wrap mb-4">
					<a href="/projects" class="back-link">
						<i class="ph-fill ph-arrow-left"></i> All Projects
					</a>
				</div>
				<div class="hero-image">
					{heroImage && <img width={1020} height={510} src={heroImage} alt="" loading="eager" fetchpriority="high" decoding="async" />}
				</div>
				<div class="prose">
					<div class="post-title mb-[1em] py-[1em]">
						<div class="post-date">{period}</div>
						<h1 class="m-0 mb-[0.35em]">{title}</h1>
						<div class="flex flex-wrap justify-center gap-[0.6em] mb-2">
							{tags.map(t => <span class="tag">{t}</span>)}
						</div>
						{(live || github) && (
							<div class="flex justify-center gap-[0.75em] flex-wrap mb-2">
								{live && <a href={live} target="_blank" rel="noopener" class="inline-flex items-center gap-[0.35em] text-[0.88em] px-4 py-[0.4em] rounded-[6px] no-underline transition-colors duration-150 bg-[var(--c-accent)] text-white hover:bg-[var(--c-accent-dark)]"><i class="ph-fill ph-arrow-up-right"></i> Live</a>}
								{github && <a href={github} target="_blank" rel="noopener" class="inline-flex items-center gap-[0.35em] text-[0.88em] px-4 py-[0.4em] rounded-[6px] no-underline transition-colors duration-150 border-[1.5px] border-[var(--c-border)] text-[var(--c-text)] hover:border-[var(--c-warm)] hover:text-[var(--c-warm)]"><i class="ph-fill ph-github-logo"></i> GitHub</a>}
							</div>
						)}
					</div>
					<slot />
				</div>
			</article>
		</main>
		<Footer />
	</body>
</html>
